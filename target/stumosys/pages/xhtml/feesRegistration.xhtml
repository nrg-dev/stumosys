<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	template="../../pages/xhtml/home.xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui" xmlns:b="http://bootsfaces.net/ui"
	xmlns:a4j="http://richfaces.org/a4j">
	<link type="text/css" rel="stylesheet" href="../../css/myStyles.css"></link>
	<link type="text/css" rel="stylesheet"
		href="../../css/customStyleSheet.css"></link>

	<ui:define name="content">

		<p:panel header="Fees Registration" toggleable="false"
			style="min-height:100%;" id="feesReg">
			<h:form>
		<center><h:message for="feesReg" style="color:red;font-size:12px"></h:message></center>
		<br></br>
			<p:outputPanel rendered="#{paymentMB.oldschoolflag}">
				<table width="100%">
					<tr>
						<td width="25%" height="50px"><h:outputLabel for="payClass"
								value="Class &amp; Section " styleClass="labelTxt"></h:outputLabel><span
							style="color: red">*</span></td>
						<td><h:selectOneMenu
								value="#{paymentMB.paymentDatabean.payClassSection}"
								id="payClass"
								valueChangeListener="#{paymentMB.classSection}"
								styleClass="selecttext_ui1">
								<f:selectItem itemLabel="Select One" itemValue="" />
								<f:selectItems value="#{paymentMB.sRoll}" />
            <p:ajax event="valueChange" immediate="true" process="@this"
									update=":XX"></p:ajax>
							</h:selectOneMenu> <br></br>
						<h:message for="payClass" style="color:red;font-size:10px"></h:message><br></br>
						</td>
					</tr>
					<tr>
						<td width="25%" height="50px"><h:outputLabel
								for="payStudentID" value="Student Name " styleClass="labelTxt"></h:outputLabel><span
							style="color: red">*</span></td>
						<td><h:selectOneMenu
								value="#{paymentMB.paymentDatabean.paymentStudID}"
								id="payStudentID" styleClass="selecttext_ui1">
								<f:selectItem itemLabel="Select One" itemValue="" />
								<f:selectItems value="#{paymentMB.sRoll1}" />
								<p:ajax event="valueChange" immediate="true" process="@this"
									update=":XX"></p:ajax>
							</h:selectOneMenu> <br></br>
						<h:message for="payStudentID" style="color:red;font-size:10px"></h:message><br></br>
						</td>
					</tr>
					<tr>
						<td width="25%" height="50px"><h:outputLabel
								for="payexamFees" value="Exam Fees " styleClass="labelTxt"></h:outputLabel><span
							style="color: red">*</span></td>
						<td width="75%" height="50px"><h:inputText
							value="#{paymentMB.paymentDatabean.examFees}" id="payexamFees"
							styleClass="inputTxt" tabindex="1"
							maxlength="10"></h:inputText> <br></br> <h:message for="payexamFees"
							style="color:red;font-size:10px"></h:message> <br></br></td>
				</tr>
				<tr>
						<td width="25%" height="50px"><h:outputLabel
								for="paytuiFees" value="Tuition Fees " styleClass="labelTxt"></h:outputLabel><span
							style="color: red">*</span></td>
						<td width="75%" height="50px"><h:inputText
							value="#{paymentMB.paymentDatabean.tuitionFees}" id="paytuiFees"
							styleClass="inputTxt" tabindex="1"
							maxlength="10"></h:inputText> <br></br> <h:message for="paytuiFees"
							style="color:red;font-size:10px"></h:message> <br></br></td>
				</tr>
				<tr>
						<td width="25%" height="50px"><h:outputLabel
								for="paytransFees" value="Transport Fees " styleClass="labelTxt"></h:outputLabel><span
							style="color: red">*</span></td>
						<td width="75%" height="50px"><h:inputText
							value="#{paymentMB.paymentDatabean.transportFees}" id="paytransFees"
							styleClass="inputTxt" tabindex="1"
							maxlength="10"></h:inputText> <br></br> <h:message for="paytransFees"
							style="color:red;font-size:10px"></h:message> <br></br></td>
				</tr>
				<tr>
				<td width="25%"></td>
					<td colspan="2" width="75%"><p:commandButton
							id="save" value="Submit" icon="fa fa-database"
							 ajax="false" action="#{paymentMB.feesregpage}"/>
							 <p:commandButton id="reset" value="Reset"
							icon="fa fa-arrow-circle-o-left" action="#{paymentMB.reset}" ajax="false"/> </td>
				</tr>
				</table>
				
   	</p:outputPanel>
   	<p:outputPanel rendered="#{paymentMB.newschoolflag}">
   	<table width="100%">
					<tr>
						<td width="25%" height="50px"><h:outputLabel for="title"
								value="Title" styleClass="labelTxt"></h:outputLabel><span
							style="color: red">*</span></td>
			<td width="75%" height="50px"><h:inputText
							id="title" value="#{paymentMB.paymentDatabean.title}"
							styleClass="inputTxt" tabindex="1">
							<p:ajax event="valueChange" immediate="true" process="@this"  update=":XX"></p:ajax>
							</h:inputText> <br></br> <h:message for="title"
							style="color:red;font-size:10px"></h:message> <br></br></td>
				</tr>	
				<tr>
						<td width="25%" height="50px"><h:outputLabel for="amount"
								value="Amount" styleClass="labelTxt"></h:outputLabel><span
							style="color: red">*</span></td>
			<td width="75%" height="50px"><h:inputText
							id="amount" value="#{paymentMB.paymentDatabean.amount}"
							styleClass="inputTxt" tabindex="1"
							maxlength="10">
							<p:ajax event="valueChange" immediate="true" process="@this"  update=":XX"></p:ajax>
							</h:inputText> <br></br> <h:message for="amount"
							style="color:red;font-size:10px"></h:message> <br></br></td>
				</tr>	
				<tr>
						<td width="25%" height="50px"><h:outputLabel for="duedate"
								value="Due Date" styleClass="labelTxt"></h:outputLabel><span
							style="color: red">*</span></td>
			<td width="75%" height="50px"><p:calendar value="#{paymentMB.paymentDatabean.duedate}"
							 id="duedate" placeholder="DD-MM-YYYY" mindate="#{currentDate}"
							styleClass="inputTxt" tabindex="1">
							<p:ajax event="dateSelect" immediate="true" process="@this"  update=":XX"></p:ajax>
							</p:calendar> <br></br> <h:message for="duedate"
							style="color:red;font-size:10px"></h:message> <br></br></td>
				</tr>	
				<tr>
						<td width="25%" height="50px"><h:outputLabel for="desc"
								value="Description" styleClass="labelTxt"></h:outputLabel><span
							style="color: red">*</span></td>
			<td width="75%" height="50px"><h:inputText
							id="desc" value="#{paymentMB.paymentDatabean.description}"
							styleClass="inputTxt" tabindex="1">
							<p:ajax event="valueChange" immediate="true" process="@this"  update=":XX"></p:ajax>
							</h:inputText> <br></br> <h:message for="desc"
							style="color:red;font-size:10px"></h:message> <br></br></td>
				</tr>	
				<tr>
						<td width="25%" height="50px"><h:outputLabel for="option"
								value="Options" styleClass="labelTxt"></h:outputLabel><span
							style="color: red">*</span></td>
						<td><h:selectOneMenu value="#{paymentMB.paymentDatabean.options}"
								 id="option" styleClass="selecttext_ui1" valueChangeListener="#{paymentMB.optionchange}">
								<f:selectItem itemLabel="Select One" noSelectionOption="true" />
								<f:selectItem itemLabel="All" itemValue="All"></f:selectItem>
								<f:selectItem itemLabel="Class" itemValue="Class"></f:selectItem>
								<f:selectItem itemLabel="Student" itemValue="Student"></f:selectItem>
            				<p:ajax event="valueChange" immediate="true" process="@this"  update=":XX"></p:ajax>
							</h:selectOneMenu> <br></br>
						<h:message for="option" style="color:red;font-size:10px"></h:message><br></br>
						</td>
					</tr>
					<h:panelGroup rendered="#{paymentMB.classflag}">
					<tr>
						<td width="25%" height="50px"><h:outputLabel for="clas"
								value="Class" styleClass="labelTxt"></h:outputLabel><span
							style="color: red">*</span></td>
						<td><h:selectOneMenu
								value="#{paymentMB.paymentDatabean.payclass}"
								id="clas"
								styleClass="selecttext_ui1">
								<f:selectItem itemLabel="Select One" itemValue="" />
								<f:selectItems value="#{paymentMB.classlist}" />
							</h:selectOneMenu> <br></br>
						<h:message for="clas" style="color:red;font-size:10px"></h:message><br></br>
						</td>
					</tr></h:panelGroup>
					<h:panelGroup rendered="#{paymentMB.studentflag}">
					<tr>
						<td width="25%" height="50px"><h:outputLabel for="clasec"
								value="Class &amp; Section " styleClass="labelTxt"></h:outputLabel><span
							style="color: red">*</span></td>
						<td><h:selectOneMenu
								value="#{paymentMB.paymentDatabean.payClassSection}"
								id="clasec"
								valueChangeListener="#{paymentMB.classSection}"
								styleClass="selecttext_ui1">
								<f:selectItem itemLabel="Select One" itemValue="" />
								<f:selectItems value="#{paymentMB.sRoll}" />
            <p:ajax event="valueChange" immediate="true" process="@this"
									update="StudentID"></p:ajax>
							</h:selectOneMenu> <br></br>
						<h:message for="clasec" style="color:red;font-size:10px"></h:message><br></br>
						</td>
					</tr>
					<tr>
						<td width="25%" height="50px"><h:outputLabel
								for="StudentID" value="Student ID " styleClass="labelTxt"></h:outputLabel><span
							style="color: red">*</span></td>
						<td><h:selectOneMenu
								value="#{paymentMB.paymentDatabean.paymentStudID}"
								id="StudentID" styleClass="selecttext_ui1">
								<f:selectItem itemLabel="Select One" itemValue="" />
								<f:selectItems value="#{paymentMB.sRoll1}" />
							</h:selectOneMenu> <br></br>
						<h:message for="StudentID" style="color:red;font-size:10px"></h:message><br></br>
						</td>
					</tr></h:panelGroup>
					<tr align="center">
					<td colspan="2"><p:commandButton
							 value="Submit" icon="fa fa-check" action="#{paymentMB.feessave}"
							  update=":XX"  onstart="PF('feesRegblockUI').show()" onsuccess="PF('feesRegblockUI').hide()"/>
							 <p:commandButton  value="Reset"
							icon="fa fa-refresh" action="#{paymentMB.reset}"  update=":XX" process="@this"/> </td>
				</tr>
				</table>				
   	</p:outputPanel>
   	<f:loadBundle var="pathBundle" basename="com.sms.paths"></f:loadBundle>
   	<p:outputPanel rendered="#{sessionScope.schoolID ==pathBundle['SCMS.SCHOOLID']}">
   		<p:panelGrid columns="4" styleClass="ui-panelgrid-blank" style="width:100%;">
   		<h:outputLabel value="Month" styleClass="labelTxt" for="month"></h:outputLabel>
   		<h:selectOneMenu styleClass="selecttext_ui1" id="month" value="#{paymentMB.paymentDatabean.month}">
   			 <f:selectItem itemLabel="Select Month" noSelectionOption="true" />
             <f:selectItem itemLabel="January" itemValue="1"/>
             <f:selectItem itemLabel="February" itemValue="2"/>
             <f:selectItem itemLabel="March" itemValue="3"/>
             <f:selectItem itemLabel="April" itemValue="4"/>
             <f:selectItem itemLabel="May" itemValue="5"/>
             <f:selectItem itemLabel="June" itemValue="6"/>
             <f:selectItem itemLabel="July" itemValue="7"/>
             <f:selectItem itemLabel="August" itemValue="8"/>
             <f:selectItem itemLabel="September" itemValue="9"/>
             <f:selectItem itemLabel="October" itemValue="10"/>
             <f:selectItem itemLabel="November" itemValue="11"/>
             <f:selectItem itemLabel="December" itemValue="12"/>
             <p:ajax process="@this" update=":XX" onstart="PF('statusDialog').show()" onsuccess="PF('statusDialog').hide()"></p:ajax>        
   		</h:selectOneMenu>
   		<h:outputLabel styleClass="labelTxt" value="Class" for="classname"></h:outputLabel>
   		<h:selectOneMenu value="#{paymentMB.paymentDatabean.payClassSection}" id="classname"
			valueChangeListener="#{paymentMB.classSection}" styleClass="selecttext_ui1">
			<f:selectItem itemLabel="Select class " noSelectionOption="true" />
			<f:selectItems value="#{paymentMB.sRoll}" />
        <p:ajax event="valueChange" process="@this" update="studentname" onstart="PF('statusDialog').show()" onsuccess="PF('statusDialog').hide()"></p:ajax>
		</h:selectOneMenu>
		<h:outputLabel></h:outputLabel><h:message for="month" style="color:red;font-size:11px"></h:message>
		<h:outputLabel></h:outputLabel><h:message for="classname" style="color:red;font-size:11px"></h:message>
		<h:outputLabel value="Student Name " styleClass="labelTxt" for="studentname"></h:outputLabel>
		<h:selectOneMenu value="#{paymentMB.paymentDatabean.paymentStudID}" id="studentname" styleClass="selecttext_ui1">
			<f:selectItem itemLabel="Select student name" noSelectionOption="true" />
			<f:selectItems value="#{paymentMB.sRoll1}" />
		<p:ajax process="@this" update="studentname"></p:ajax>
		</h:selectOneMenu>
		<h:outputLabel value="Transport fees" styleClass="labelTxt" for="transportfess"></h:outputLabel>
		<h:inputText id="transportfess" styleClass="inputTxt" value="#{paymentMB.paymentDatabean.transportFees}">
		<p:ajax process="@this" update="transportfess"></p:ajax></h:inputText>
		<h:outputLabel></h:outputLabel><h:message for="studentname" style="color:red;font-size:11px"></h:message>
		<h:outputLabel></h:outputLabel><h:message for="transportfess"></h:message>
		<h:outputLabel value="Tuition fees" styleClass="labelTxt" for="tuitionfees"></h:outputLabel>
		<h:inputText id="tuitionfees" styleClass="inputTxt" value="#{paymentMB.paymentDatabean.tuitionFees}">
		<p:ajax update="tuitionfees" process="@this"></p:ajax></h:inputText>
		<h:outputLabel value="Special fees" styleClass="labelTxt" for="specialfess" rendered="#{paymentMB.paymentDatabean.month=='6'}"></h:outputLabel>
		<h:inputText styleClass="inputTxt" id="specialfess" rendered="#{paymentMB.paymentDatabean.month=='6'}" value="#{paymentMB.paymentDatabean.specialFees}">
		<p:ajax update="specialfess" process="@this"></p:ajax>
		</h:inputText>
		<h:outputLabel></h:outputLabel><h:message for="tuitionfees"></h:message>
		<h:outputLabel></h:outputLabel><h:message for="specialfess"></h:message>
		<h:outputLabel value="ECA fees" styleClass="labelTxt" for="ecafees" rendered="#{paymentMB.paymentDatabean.month=='6'}"></h:outputLabel>
		<h:inputText id="ecafees" styleClass="inputTxt" rendered="#{paymentMB.paymentDatabean.month=='6'}" value="#{paymentMB.paymentDatabean.ecaFees}">
		<p:ajax update="ecafees" process="@this"></p:ajax></h:inputText>
		<h:outputLabel value="Computer and Lab fees" styleClass="labelTxt" for="labfees" rendered="#{paymentMB.paymentDatabean.month=='6'}"></h:outputLabel>
		<h:inputText id="labfees" styleClass="inputTxt" rendered="#{paymentMB.paymentDatabean.month=='6'}" value="#{paymentMB.paymentDatabean.labFees}">
		<p:ajax update="labfees" process="@this"></p:ajax></h:inputText>
		<h:outputLabel></h:outputLabel><h:message for="ecafees"></h:message>
		<h:outputLabel></h:outputLabel><h:message for="labfees"></h:message>
		<h:outputLabel value="Registeration and Admission fees" styleClass="labelTxt" for="admissionfees" rendered="#{paymentMB.paymentDatabean.month=='6'}"></h:outputLabel>
		<h:inputText id="admissionfees" styleClass="inputTxt" rendered="#{paymentMB.paymentDatabean.month=='6'}" value="#{paymentMB.paymentDatabean.admissionFees}">
		<p:ajax update="admissionfees" process="@this"></p:ajax></h:inputText>
   		</p:panelGrid>
   		<br></br>
   		<center>
   		<p:commandButton value="Submit" action="#{paymentMB.submit}" update="XX" process="@this" onstart="PF('statusDialog').show()" onsuccess="PF('statusDialog').hide()"></p:commandButton>
   		<p:commandButton value="Cancel"  onstart="PF('statusDialog').show()" onsuccess="PF('statusDialog').hide()">
   		<p:ajax update=":XX:feesReg" resetValues="true"></p:ajax></p:commandButton>
   		</center>
   	</p:outputPanel>
			</h:form>
		</p:panel>
		<p:dialog header="Confirmation Box" appendTo="@(body)" closable="false" widgetVar="saveFeesReg"  modal="true"  width="40%" height="40%" resizable="false" visible="#{paymentMB.successFlag}" dynamic="true">
	
      <h:form>
  <center><h:outputText value="#{paymentMB.paymentDatabean.paymentStudID} Fees details successfully saved"></h:outputText>
  <br></br>
  <p:commandButton update="XX" immediate="true" action="#{paymentMB.returnToHome2}" process="@this" value="OK" oncomplete="PF('saveFeesReg').hide()"></p:commandButton>
 </center>
  </h:form>
   </p:dialog>
   <p:dialog header="Confirmation Box" appendTo="@(body)" closable="false" widgetVar="existFeesReg"  modal="true"  width="40%" height="40%" resizable="false" visible="#{paymentMB.existFlag}" dynamic="true">
	
      <h:form>
  <center><h:outputText value="#{paymentMB.paymentDatabean.paymentStudID} Fees details already exists"></h:outputText>
  <br></br>
  <p:commandButton update="XX" immediate="true" action="#{paymentMB.returnToHome2}" process="@this" value="OK" oncomplete="PF('existFeesReg').hide()"></p:commandButton>
 </center>
  </h:form>
   </p:dialog>
   <p:dialog header="Confirmation Box" appendTo="@(body)" closable="false" widgetVar="confirm"  modal="true"  width="40%" height="40%" resizable="false" visible="#{paymentMB.successFlag}" dynamic="true">
	
      <h:form>
  <center><h:outputText value="Fees details successfully saved"></h:outputText>
  <br></br>
  <p:commandButton  process="@this" value="OK" oncomplete="PF('confirm').hide()"></p:commandButton>
 </center>
  </h:form>
   </p:dialog>
		<p:blockUI widgetVar="feesRegblockUI" block="feesReg">

   <h:panelGrid id="blockUIContent" columns="2"
    style="table-layout:auto;">
    <p:graphicImage value="../../images/ajax-loader1.gif" />
    <h:outputText value="Please wait, data is being processed..."
     style="white-space: nowrap;" />
   </h:panelGrid>
  </p:blockUI>
		<p:remoteCommand action="#{paymentMB.submit}"
   name="feesRegRemote"></p:remoteCommand>
		
	</ui:define>
</ui:composition>