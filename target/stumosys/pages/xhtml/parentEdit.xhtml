<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	template="../../pages/xhtml/home.xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui" xmlns:b="http://bootsfaces.net/ui"
	xmlns:a4j="http://richfaces.org/a4j">

	<link type="text/css" rel="stylesheet" href="../../css/myStyles.css"></link>
	<link type="text/css" rel="stylesheet"
		href="../../css/customStyleSheet.css"></link>


	<ui:define name="content">
		<p:growl id="messages" showDetail="true" />

		<p:panel toggleable="false" header="Add Parents" id="centerxx"
			style="min-height:100%;">
			<h:form id="form">
				<table width="100%">
					<tr>
						<td width="25%" height="50px"><h:outputText
								value="Class &amp; Section " for="parClassID"
								styleClass="labelTxt"></h:outputText> <span style="color: red">*</span>
						</td>
						<td width="75%" height="50px"><h:selectOneMenu
								value="#{parentsViewMB.parentsDataBean.parStuClass}"
								valueChangeListener="#{parentsViewMB.classChange1}"
								id="parClassID" style="margin-left:+130px;" styleClass="selecttext_ui1">
								<f:selectItem itemLabel="Please Choose Class &amp; Section"
									itemValue="Choose" noSelectionOption="true"></f:selectItem>
								<f:selectItems value="#{parentsViewMB.classSectionList}"></f:selectItems>
								<p:ajax event="valueChange" immediate="true" process="@this"
									update=":XX" />
							</h:selectOneMenu><br></br> <h:message for="parClassID" style="color:red;font-size:11px;margin-left:+150px;"></h:message>
						</td><td width="25%" height="50px" rowspan="2">
							
							<p:commandButton style="margin-left:-75px;" icon="fa fa-plus" update="students @parent"  action="#{parentsViewMB.addStudent}" ajax="false">
							  <p:collector value="#{parentsViewMB.parentsDataBean}" addTo="#{parentsViewMB.parentsBean}" unique="true"/>
							</p:commandButton>
           </td><td width="25%" height="50px" rowspan="2">
            <p:outputPanel id="students" style="width:400px;margin-left:-15px;">
        <p:dataTable value="#{parentsViewMB.parentsBean}" var="students" id="studentsTable">
 
            <p:column headerText="Class">
                <h:outputText value="#{students.parStuClass}" />
            </p:column>
 
            <p:column headerText="Student Name">
                <h:outputText value="#{students.parStudID}" />
            </p:column>
 
            <p:column headerText="Action" width="18%">
                <p:commandButton icon="fa fa-trash-o" update=":XX" process=":XX:form:students" style="font-family: book antiqua;font-size: 13px;">
                    <p:collector value="#{students}" removeFrom="#{parentsViewMB.parentsBean}" unique="true"/>
                </p:commandButton>
            </p:column>
 
        </p:dataTable>
    </p:outputPanel>
						</td>
					</tr>
					<tr>
						<td width="25%" height="50px"><h:outputText
								value="Student Name " for="parStudentID" styleClass="labelTxt"></h:outputText>
							<span style="color: red">*</span></td>
						<td width="75%" height="50px"><h:selectOneMenu
								value="#{parentsViewMB.parentsDataBean.parStudID}"
								id="parStudentID" style="margin-left:+130px;" styleClass="selecttext_ui1">
								<f:selectItem itemLabel="Please Choose Student Name" itemValue=""
									noSelectionOption="true"></f:selectItem>
								<f:selectItems value="#{parentsViewMB.studentIDList}"></f:selectItems>
								<p:ajax event="valueChange" immediate="true" process="@this"
									update=":XX" />
							</h:selectOneMenu><br></br> <h:message for="parStudentID" style="color:red;font-size:11px;margin-left:+150px;"></h:message>
						</td>
					</tr>
				</table>
			</h:form>
			<table width="100%">
				<tr>
					<td width="25%" height="50px"><h:outputText
							value="Parent First Name " for="parFName" styleClass="labelTxt"></h:outputText>
						<span style="color: red">*</span></td>
					<td width="75%" height="50px"><h:inputText
							placeholder="First Name"
							value="#{parentsViewMB.parentsDataBean.parFirstName}"
							id="parFName" styleClass="inputTxt" /> <br></br> 
							<h:message
							for="parFName" style="color:red;font-size:11px"></h:message><br></br></td>
				</tr>
				<tr>
					<td width="25%" height="50px"><h:outputText
							value="Parent Last Name " for="parLName" styleClass="labelTxt"></h:outputText>
						</td>
					<td width="75%" height="50px"><h:inputText
							placeholder="Last Name"
							value="#{parentsViewMB.parentsDataBean.parLastName}"
							id="parLName" styleClass="inputTxt" /> <br></br> 
							</td>
				</tr>
				<tr>
					<td width="25%" height="50px"><h:outputText value="Relation "
							for="parRelation" styleClass="labelTxt"></h:outputText> <span
						style="color: red">*</span></td>
					<td width="75%" height="50px"><h:inputText
							placeholder="Relation"
							value="#{parentsViewMB.parentsDataBean.parentRelation}"
							id="parRelation" styleClass="inputTxt" /> <br></br> <h:message
							for="parRelation" style="color:red;font-size:11px"></h:message><br></br></td>
				</tr>

				<tr>
					<td width="25%" height="50px"><h:outputText value="Parent ID"
							for="parParentID" styleClass="labelTxt"></h:outputText> <span
						style="color: red">*</span></td>
					<td width="75%" height="50px"><h:inputText readonly="true"
							value="#{parentsViewMB.parentsDataBean.parParentID}"
							id="parParentID" styleClass="inputTxt" placeholder="Parent ID" />
						<br></br> <h:message for="parParentID"
							style="color:red;font-size:11px"></h:message><br></br></td>
				</tr>
				<tr>
					<td width="25%" height="50px"><h:outputText value="E-mail "
							for="parE-mail" styleClass="labelTxt"></h:outputText> <span
						style="color: red">*</span></td>
					<td width="75%" height="50px"><h:inputText
							value="#{parentsViewMB.parentsDataBean.parEmail}" id="parE-mail"
							styleClass="inputTxt" placeholder="xxx@yyy.com" /> <br></br> <h:message
							for="parE-mail" style="color:red;font-size:11px"></h:message><br></br></td>
				</tr>
				<tr>
					<td width="25%" height="50px"><h:outputText
							value="Phone Number " for="parPhone" styleClass="labelTxt"></h:outputText>
						<span style="color: red">*</span></td>
					<td width="75%" height="50px">
					
					<h:selectOneMenu value="#{parentsViewMB.parentsDataBean.countryCode}" id="SPcountrycode" valueChangeListener="#{parentsViewMB.phonenumberclear}" styleClass="selecttext_ui1" style="border-radius:0px;height: 25px;width:60px;font-size: 10px;color: black;">	
						<f:selectItem itemLabel="Code" noSelectionOption="true"></f:selectItem>
						<f:selectItem itemLabel="+971-UAE" itemValue="+971-UAE"></f:selectItem>
						<f:selectItem itemLabel="+91-INDIA" itemValue="+91-INDIA"></f:selectItem>
						<f:selectItem itemLabel="+60-MALAYSIA" itemValue="+60-MALAYSIA"></f:selectItem>	 
						<f:selectItem itemLabel="+62-INDONESIA" itemValue="+62-INDONESIA"></f:selectItem>
						<p:ajax update="SPcountrycode parPhone"  process="@this" immediate="true" event="valueChange"></p:ajax> 
					</h:selectOneMenu>
					<h:inputText
							value="#{parentsViewMB.parentsDataBean.parPhoneNo}" id="parPhone" style="width: 148px;"
							 styleClass="inputTxt"
							placeholder="99999999999"/> <br></br> <h:message
							for="parPhone" style="color:red;font-size:11px"></h:message><br></br></td>
				</tr>
				<tr>
					<td valign="top"><h:outputLabel value="Uploaded Photo" 
							for="parUpPhoto" styleClass="labelTxt" /> <span
						style="color: red">*</span></td>
					<td><a4j:mediaOutput style="width:100px;height:100px;" rendered="#{parentsViewMB.parentsDataBean.parfilePath!=''}"
							element="img" cacheable="false" session="true"
							createContent="#{parentsViewMB.imageview}" mimeType="image/png" />
					<p:graphicImage value="../../images/male.jpg" width="100px" height="100px" rendered="#{parentsViewMB.parentsDataBean.parfilePath==''}"/>
					</td>
				</tr>
				<tr>
					<td valign="top"><h:outputLabel value="Parent Photo"
							for="parPhoto" styleClass="labelTxt" />
					</td>
					<td><p:fileUpload update="messages" mode="advanced"
							value="#{parentsViewMB.parentsDataBean.parFile}" id="parPhoto"
							fileUploadListener="#{parentsViewMB.dummyAction}"
							allowTypes="/(\.|\/)(gif|jpe?g|png)$/" /> <br></br> <h:message
							for="parPhoto" style="color:red;font-size:11px"></h:message><br></br>

					</td>
				</tr>
				<tr align="center">
					<td colspan="2"><br></br> <p:commandButton id="updateid"
							value="Submit" ajax="false" action="#{parentsViewMB.update}"></p:commandButton>
						<p:commandButton value="Cancel" ajax="false"
							action="#{parentsViewMB.returnToHome}"></p:commandButton></td>
				</tr>
			</table>

		</p:panel>
		<p:dialog header="Confirmation Box" appendTo="@(body)"
			closable="false" widgetVar="parentUpdateDialog" modal="true"
			width="40%" height="40%" resizable="false"
			visible="#{parentsViewMB.boxflag}" dynamic="true">
			<h:form>

				<center>
					<h:outputText
						value="#{parentsViewMB.parentsDataBean.parParentID} is Edited Successfully"></h:outputText>
					<br></br>
					<p:commandButton immediate="true"
						action="#{parentsViewMB.returnToHome}" process="@this" value="OK"
						oncomplete="PF('parentUpdateDialog').hide()"></p:commandButton>
				</center>
			</h:form>
		</p:dialog>
		<p:blockUI widgetVar="blockUIW" block="centerxx">
			<h:panelGrid id="blockUIContent" columns="2"
				style="table-layout:auto;">
				<p:graphicImage value="../../images/ajax-loader1.gif" />
				<h:outputText value="Please wait, data is being processed..."
					style="white-space: nowrap;" />
			</h:panelGrid>
		</p:blockUI>
		<p:remoteCommand action="#{parentsViewMB.updateParent}" name="test1"></p:remoteCommand>
	</ui:define>
</ui:composition>